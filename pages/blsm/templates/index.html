<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>r0b0 - Communication Framework for Hardware and Software</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script
      src="https://use.fontawesome.com/releases/v6.3.0/js/all.js"
      crossorigin="anonymous"
    ></script>
    <!-- Google fonts-->
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/static/css/styles.css" rel="stylesheet" />
    <!-- Include Socket.IO for real-time state updates -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
      integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
      crossorigin="anonymous"
    ></script>
    <!-- Three.js for floating visualizer -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
      .floating-viz {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 280px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        z-index: 9999;
        overflow: hidden;
      }
      .floating-viz.collapsed { height: 36px; }
      .floating-viz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: #2c3e50;
        color: white;
        cursor: pointer;
        font-size: 0.85rem;
      }
      .floating-viz-header button {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
      }
      #floating-viz-container {
        height: 200px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .floating-viz.collapsed #floating-viz-container { display: none; }
    </style>
  </head>
  <body id="page-top">
    <!-- Navigation-->
    <!-- Navigation-->
    <nav
      class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top"
      id="mainNav"
    >
      <div class="container">
        <a class="navbar-brand" href="#page-top">r0b0</a>
        <button
          class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded" href="/">Home</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded" href="/blsm_web">Key Events</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded" href="/blsm_sensor">Sensor</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded" href="/blsm_playback">Playback</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded" href="/blsm_calib">Calibration</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Masthead-->
    <header class="masthead bg-primary text-white text-center">
      <div class="container d-flex align-items-center flex-column">
        <!-- Masthead Heading-->
        <h1 class="masthead-heading text-uppercase mb-0">r0b0</h1>
        <!-- Icon Divider-->
        <div class="divider-custom divider-light">
          <div class="divider-custom-line"></div>
          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
          <div class="divider-custom-line"></div>
        </div>
        <!-- Masthead Subheading-->
        <p class="masthead-subheading font-weight-light mb-0">
          Communication Framework - Hardware Interface - Robot Control
        </p>
        <!-- Quick Links Section-->
        <div class="row mt-5">
          <div class="col-lg-4 mb-4 mb-lg-0 d-flex flex-column">
            <h4 class="text-uppercase mb-3">Key Events</h4>
            <p class="lead font-weight-light mb-3">
              Capture keyboard inputs to control robot actions in real-time.
            </p>
            <a
              class="btn btn-outline-light mt-auto align-self-center"
              href="/blsm_web"
            >
              <i class="fas fa-keyboard me-2"></i>
              Go to Key Events
            </a>
          </div>
          <div class="col-lg-4 mb-4 mb-lg-0 d-flex flex-column">
            <h4 class="text-uppercase mb-3">Sensor</h4>
            <p class="lead font-weight-light mb-3">
              Use the distance sensor to control the height of the robot.
            </p>
            <a
              class="btn btn-outline-light mt-auto align-self-center"
              href="/blsm_sensor"
            >
              <i class="fas fa-keyboard me-2"></i>
              Go to Sensor
            </a>
          </div>
          <div class="col-lg-4 mb-4 mb-lg-0 d-flex flex-column">
            <h4 class="text-uppercase mb-3">Motor Calibration</h4>
            <p class="lead font-weight-light mb-3">
              Fine-tune motor positions with interactive sliders for precise
              calibration.
            </p>
            <a
              class="btn btn-outline-light mt-auto align-self-center"
              href="/blsm_calib"
            >
              <i class="fas fa-sliders-h me-2"></i>
              Go to Calibration
            </a>
          </div>
          <div class="col-lg-4 d-flex flex-column">
            <h4 class="text-uppercase mb-3">Speech Recognition</h4>
            <p class="lead font-weight-light mb-3">
              Control your robot using voice commands with advanced speech
              recognition.
            </p>
            <a
              class="btn btn-outline-light mt-auto align-self-center"
              href="/speech_recognition"
            >
              <i class="fas fa-microphone me-2"></i>
              Go to Speech Control
            </a>
          </div>
        </div>
      </div>
    </header>
    <!-- About r0b0 Section-->
    <section class="page-section bg-primary text-white mb-0" id="about">
      <div class="container">
        <!-- About Section Heading-->
        <h2 class="page-section-heading text-center text-uppercase text-white">
          About r0b0
        </h2>
        <!-- Icon Divider-->
        <div class="divider-custom divider-light">
          <div class="divider-custom-line"></div>
          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
          <div class="divider-custom-line"></div>
        </div>
        <!-- About Section Content-->
        <div class="row">
          <div class="col-lg-6 ms-auto">
            <p class="lead">
              r0b0 is a communication framework for connecting hardware and
              software â€” an "aconnect" for anything. It's a general-purpose tool
              for quickly prototyping mechatronic systems with a bend towards
              creative applications.
            </p>
            <p class="lead">
              The system is built around three main components:
              <strong>Gadgets</strong> (individual hardware devices or software
              services), <strong>Cables</strong> (connections that translate
              between Gadgets), and <strong>Rigs</strong> (networks of connected
              Gadgets).
            </p>
          </div>
          <div class="col-lg-6 me-auto">
            <p class="lead">
              This web interface provides control panels for robot interaction,
              including keyboard input capture, motor calibration tools, and
              voice command recognition. It was originally developed for
              Blossom, an open-source robot platform for human-robot interaction
              research.
            </p>
            <p class="lead">
              Use the navigation menu to access the Key Events listener for
              keyboard control, the Sensor panel for controlling the robot with
              its distance sensor, the Calibration panel for calibrating robot
              movements, or the Speech Recognition system for voice commands.
            </p>
          </div>
        </div>
        <!-- About Section Button-->
        <div class="text-center mt-4">
          <a
            class="btn btn-xl btn-outline-light"
            href="https://github.com/msgtn/r0b0"
            target="_blank"
          >
            <i class="fab fa-github me-2"></i>
            View on GitHub
          </a>
        </div>
      </div>
    </section>
    <!-- Footer-->
    <footer class="footer text-center">
      <div class="container">
        <div class="row">
          <!-- Footer Project Info-->
          <div class="col-lg-4 mb-5 mb-lg-0">
            <h4 class="text-uppercase mb-4">r0b0 Framework</h4>
            <p class="lead mb-0">
              Communication library for<br />
              hardware and software
            </p>
          </div>
          <!-- Footer Social Icons-->
          <div class="col-lg-4 mb-5 mb-lg-0">
            <h4 class="text-uppercase mb-4">Links</h4>
            <a
              class="btn btn-outline-light btn-social mx-1"
              href="https://github.com/msgtn/r0b0"
              target="_blank"
              ><i class="fab fa-fw fa-github"></i
            ></a>
            <a class="btn btn-outline-light btn-social mx-1" href="/blsm_web"
              ><i class="fas fa-fw fa-keyboard"></i
            ></a>
            <a class="btn btn-outline-light btn-social mx-1" href="/blsm_calib"
              ><i class="fas fa-fw fa-sliders-h"></i
            ></a>
            <a
              class="btn btn-outline-light btn-social mx-1"
              href="/speech_recognition"
              ><i class="fas fa-fw fa-microphone"></i
            ></a>
          </div>
          <!-- Footer About Text-->
          <div class="col-lg-4">
            <h4 class="text-uppercase mb-4">Open Source</h4>
            <p class="lead mb-0">
              Licensed under AGPL-3.0<br />
              <a href="https://github.com/msgtn/r0b0">View Source Code</a>
            </p>
          </div>
        </div>
      </div>
    </footer>
    <!-- Copyright Section-->
    <div class="copyright py-4 text-center text-white">
      <div class="container">
        <small>Copyright &copy; r0b0 Framework 2025</small>
      </div>
    </div>
    <!-- Floating Visualizer Panel -->
    <div id="floating-visualizer" class="floating-viz">
      <div class="floating-viz-header" onclick="toggleFloatingViz()">
        <span><i class="fas fa-robot me-2"></i>Robot</span>
        <button id="viz-toggle-btn">_</button>
      </div>
      <div id="floating-viz-container"></div>
    </div>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="/static/js/scripts.js"></script>
    <!-- Visualizer JS -->
    <script src="/static/visualizer.js"></script>
    <script>
      (function() {
        let floatingViz = null;
        const panel = document.getElementById('floating-visualizer');
        const container = document.getElementById('floating-viz-container');
        const toggleBtn = document.getElementById('viz-toggle-btn');

        const isCollapsed = localStorage.getItem('floatingVizCollapsed') === 'true';
        if (isCollapsed) {
          panel.classList.add('collapsed');
          toggleBtn.textContent = '+';
        }

        window.toggleFloatingViz = function() {
          panel.classList.toggle('collapsed');
          const collapsed = panel.classList.contains('collapsed');
          toggleBtn.textContent = collapsed ? '+' : '_';
          localStorage.setItem('floatingVizCollapsed', collapsed);
          if (floatingViz && !collapsed) setTimeout(() => floatingViz.onResize(), 350);
        };

        function initFloatingVisualizer() {
          if (container && typeof BlsmVisualizer !== 'undefined' && !floatingViz) {
            floatingViz = new BlsmVisualizer(container);
          }
        }

        const vizSocket = io.connect(window.location.origin, {
          reconnection: true,
          reconnectionDelay: 1000,
        });

        vizSocket.on('motor_pose', function(data) {
          if (floatingViz) floatingViz.updatePose(data.h, data.yaw, data.pitch, data.roll);
        });

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initFloatingVisualizer);
        } else {
          initFloatingVisualizer();
        }
      })();
    </script>
  </body>
</html>
